<!DOCTYPE html>
<html>
<head>
<title>Night Runner</title>
</head>
<body style="text-align:center;background:#ddd;">

<h2 id="info">Day Time - Collect Coins</h2>

<canvas id="game" width="800" height="400" style="border:3px solid black;background:#7ec850;"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const info = document.getElementById("info");

let player = { x:50, y:200, size:20, speed:4 };
let coins = [];
let monsters = [];
let day = true;
let time = 0;
let score = 0;

for(let i=0;i<5;i++){
  coins.push({x:Math.random()*760, y:Math.random()*360});
}

document.addEventListener("keydown",e=>{
  if(e.key=="w") player.y -= player.speed;
  if(e.key=="s") player.y += player.speed;
  if(e.key=="a") player.x -= player.speed;
  if(e.key=="d") player.x += player.speed;
});

function spawnMonster(){
  monsters.push({x:800,y:Math.random()*360,size:20});
}

function loop(){
  ctx.clearRect(0,0,800,400);

  time++;
  if(time > 600){
    day = !day;
    time = 0;
    if(day){
      info.innerText = "Day Time - Collect Coins";
      monsters = [];
      canvas.style.background="#7ec850";
    }else{
      info.innerText = "Night Time - Survive!";
      canvas.style.background="#111";
      spawnMonster();
    }
  }

  // Player
  ctx.fillStyle="blue";
  ctx.fillRect(player.x,player.y,player.size,player.size);

  // Coins
  if(day){
    ctx.fillStyle="gold";
    for(let c of coins){
      ctx.fillRect(c.x,c.y,10,10);
      if(Math.abs(player.x-c.x)<20 && Math.abs(player.y-c.y)<20){
        c.x=Math.random()*760;
        c.y=Math.random()*360;
        score++;
      }
    }
  }

  // Monsters
  if(!day){
    ctx.fillStyle="red";
    for(let m of monsters){
      m.x -= 2;
      ctx.fillRect(m.x,m.y,m.size,m.size);
      if(Math.abs(player.x-m.x)<20 && Math.abs(player.y-m.y)<20){
        alert("Game Over! Score: "+score);
        location.reload();
      }
    }
    if(time % 120 == 0) spawnMonster();
  }

  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
